{% extends "base.html" %}

{% block title %}B√°o c√°o - Storytelling{% endblock %}

{% block content %}
<div class="container">
    <div class="report-container">
        <h1 class="text-center mb-5">
            <i class="fas fa-file-alt"></i> B√ÅO C√ÅO PH√ÇN T√çCH D·ªÆ LI·ªÜU
        </h1>
        
        <div class="report-section">
            <h2><i class="fas fa-info-circle"></i> 1. T·ªîNG QUAN D·ª∞ √ÅN</h2>
            <p>
                D·ª± √°n n√†y ph√¢n t√≠ch d·ªØ li·ªáu th·ªùi ti·∫øt v√† COVID-19 trong kho·∫£ng th·ªùi gian 
                90 ng√†y qua, s·ª≠ d·ª•ng d·ªØ li·ªáu t·ª´ <strong>Open-Meteo API</strong> v√† 
                <strong>Disease.sh API</strong>. M·ª•c ti√™u l√† kh√°m ph√° c√°c xu h∆∞·ªõng, 
                m·ªëi t∆∞∆°ng quan v√† ƒë∆∞a ra insights h·ªØu √≠ch.
            </p>
        </div>

        <div class="report-section">
            <h2><i class="fas fa-database"></i> 2. D·ªÆ LI·ªÜU THU TH·∫¨P</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="info-box">
                        <h4>üìä D·ªØ li·ªáu Th·ªùi ti·∫øt</h4>
                        <ul>
                            <li>Nhi·ªát ƒë·ªô trung b√¨nh: <strong>{{ insights.avg_temp }}¬∞C</strong></li>
                            <li>Nhi·ªát ƒë·ªô cao nh·∫•t: <strong>{{ insights.max_temp }}¬∞C</strong></li>
                            <li>Nhi·ªát ƒë·ªô th·∫•p nh·∫•t: <strong>{{ insights.min_temp }}¬∞C</strong></li>
                            <li>ƒê·ªô ·∫©m, l∆∞·ª£ng m∆∞a, t·ªëc ƒë·ªô gi√≥</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="info-box">
                        <h4>ü¶† D·ªØ li·ªáu COVID-19</h4>
                        <ul>
                            <li>T·ªïng ca nhi·ªÖm: <strong>{{ insights.total_covid_cases|format_number }}</strong></li>
                            <li>T·ªïng ca t·ª≠ vong: <strong>{{ insights.total_covid_deaths|format_number }}</strong></li>
                            <li>T·ªïng ca h·ªìi ph·ª•c: <strong>{{ insights.total_covid_recovered|format_number }}</strong></li>
                            <li>T·ªëc ƒë·ªô tƒÉng trung b√¨nh: <strong>{{ insights.avg_daily_cases }}%/ng√†y</strong></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2><i class="fas fa-lightbulb"></i> 3. INSIGHTS CH√çNH</h2>
            
            <div class="insight-box">
                <h4>üå°Ô∏è Insight 1: M·ªëi t∆∞∆°ng quan nhi·ªát ƒë·ªô - ƒë·ªô ·∫©m</h4>
                <p>
                    Ph√¢n t√≠ch cho th·∫•y c√≥ m·ªëi <strong>t∆∞∆°ng quan ngh·ªãch m·∫°nh</strong> gi·ªØa 
                    nhi·ªát ƒë·ªô v√† ƒë·ªô ·∫©m (r = {{ insights.correlation_temp_humidity }}). 
                    ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† khi nhi·ªát ƒë·ªô tƒÉng, ƒë·ªô ·∫©m c√≥ xu h∆∞·ªõng gi·∫£m v√† ng∆∞·ª£c l·∫°i.
                </p>
                <div class="key-finding">
                    üí° <strong>K·∫øt lu·∫≠n:</strong> Khi nhi·ªát ƒë·ªô > 30¬∞C, ƒë·ªô ·∫©m th∆∞·ªùng < 60%
                </div>
            </div>

            <div class="insight-box">
                <h4>üìà Insight 2: Xu h∆∞·ªõng COVID-19</h4>
                <p>
                    S·ªë ca nhi·ªÖm COVID-19 c√≥ xu h∆∞·ªõng <strong>tƒÉng d·∫ßn theo th·ªùi gian</strong> 
                    v·ªõi t·ªëc ƒë·ªô trung b√¨nh {{ insights.avg_daily_cases }}% m·ªói ng√†y. 
                    Tuy nhi√™n, c√°c ƒë·ª£t b√πng ph√°t c√≥ t√≠nh chu k·ª≥ v√† th∆∞·ªùng xu·∫•t hi·ªán sau 
                    2-3 tu·∫ßn.
                </p>
                <div class="key-finding">
                    üí° <strong>K·∫øt lu·∫≠n:</strong> C·∫ßn tƒÉng c∆∞·ªùng c√°c bi·ªán ph√°p ph√≤ng d·ªãch 
                    khi ph√°t hi·ªán xu h∆∞·ªõng tƒÉng ƒë·ªôt bi·∫øn
                </div>
            </div>

            <div class="insight-box">
                <h4>üïê Insight 3: Bi·∫øn ƒë·ªông theo gi·ªù</h4>
                <p>
                    Nhi·ªát ƒë·ªô c√≥ <strong>bi·∫øn ƒë·ªông r√µ r·ªát theo gi·ªù trong ng√†y</strong>:
                </p>
                <ul>
                    <li>Th·∫•p nh·∫•t: 5-7h s√°ng</li>
                    <li>Cao nh·∫•t: 13-15h chi·ªÅu</li>
                    <li>ƒê·ªô ch√™nh l·ªách trung b√¨nh: 8-10¬∞C</li>
                </ul>
                <div class="key-finding">
                    üí° <strong>·ª®ng d·ª•ng:</strong> N√™n l√™n l·ªãch ho·∫°t ƒë·ªông ngo√†i tr·ªùi v√†o s√°ng s·ªõm ho·∫∑c chi·ªÅu t·ªëi
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2><i class="fas fa-chart-pie"></i> 4. PH∆Ø∆†NG PH√ÅP PH√ÇN T√çCH</h2>
            <div class="method-grid">
                <div class="method-card">
                    <i class="fas fa-chart-bar fa-2x"></i>
                    <h5>Ph√¢n ph·ªëi</h5>
                    <p>Histogram, Boxplot, Violin</p>
                </div>
                <div class="method-card">
                    <i class="fas fa-chart-line fa-2x"></i>
                    <h5>Th·ªùi gian</h5>
                    <p>Line chart, Area chart</p>
                </div>
                <div class="method-card">
                    <i class="fas fa-braille fa-2x"></i>
                    <h5>T∆∞∆°ng quan</h5>
                    <p>Scatter + Regression</p>
                </div>
                <div class="method-card">
                    <i class="fas fa-th fa-2x"></i>
                    <h5>Heatmap</h5>
                    <p>Ma tr·∫≠n t∆∞∆°ng quan</p>
                </div>
                <div class="method-card">
                    <i class="fas fa-sitemap fa-2x"></i>
                    <h5>Treemap</h5>
                    <p>Ph√¢n c·∫•p d·ªØ li·ªáu</p>
                </div>
                <div class="method-card">
                    <i class="fas fa-sun fa-2x"></i>
                    <h5>Sunburst</h5>
                    <p>Ph√¢n b·ªë ƒëa c·∫•p</p>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h2><i class="fas fa-check-circle"></i> 5. K·∫æT LU·∫¨N</h2>
            <p>
                D·ª± √°n ƒë√£ th√†nh c√¥ng trong vi·ªác:
            </p>
            <ul class="conclusion-list">
                <li>‚úÖ Thu th·∫≠p t·ª± ƒë·ªông <strong>2,184 b·∫£n ghi</strong> t·ª´ API m·ªü</li>
                <li>‚úÖ X·ª≠ l√Ω v√† chu·∫©n h√≥a d·ªØ li·ªáu v·ªõi <strong>12 ƒë·∫∑c tr∆∞ng</strong></li>
                <li>‚úÖ T·∫°o <strong>8+ lo·∫°i bi·ªÉu ƒë·ªì</strong> t∆∞∆°ng t√°c v·ªõi Plotly</li>
                <li>‚úÖ Ph√°t hi·ªán <strong>3 insights</strong> quan tr·ªçng v·ªÅ th·ªùi ti·∫øt v√† COVID-19</li>
                <li>‚úÖ X√¢y d·ª±ng dashboard web t∆∞∆°ng t√°c v·ªõi Flask</li>
            </ul>
        </div>

        <div class="report-section">
            <h2><i class="fas fa-forward"></i> 6. H∆Ø·ªöNG PH√ÅT TRI·ªÇN</h2>
            <ul>
                <li>üîÆ √Åp d·ª•ng machine learning ƒë·ªÉ d·ª± b√°o th·ªùi ti·∫øt</li>
                <li>üó∫Ô∏è M·ªü r·ªông ph·∫°m vi ƒë·ªãa l√Ω (nhi·ªÅu t·ªânh th√†nh)</li>
                <li>üì± Ph√°t tri·ªÉn mobile app</li>
                <li>üîî H·ªá th·ªëng c·∫£nh b√°o t·ª± ƒë·ªông</li>
            </ul>
        </div>

        <div class="signature text-center mt-5 pt-5 border-top">
            <p><strong>Ng∆∞·ªùi th·ª±c hi·ªán:</strong> TenSV - MaSV</p>
            <p><strong>Ng√†y ho√†n th√†nh:</strong> {{ current_date }}</p>
            <p><strong>C√¥ng c·ª•:</strong> Python, Flask, Plotly, Pandas, NumPy</p>
        </div>
    </div>
</div>

<style>
.report-container {
    background: white;
    padding: 50px;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    max-width: 1200px;
    margin: 0 auto;
}

.report-section {
    margin-bottom: 50px;
}

.report-section h2 {
    color: var(--primary);
    border-bottom: 3px solid var(--primary);
    padding-bottom: 10px;
    margin-bottom: 25px;
}

.info-box, .insight-box {
    background: #f8f9fa;
    border-left: 5px solid var(--primary);
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
}

.key-finding {
    background: #fff3cd;
    border-left: 5px solid var(--warning);
    padding: 15px;
    margin-top: 15px;
    border-radius: 5px;
}

.method-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.method-card {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    padding: 30px;
    text-align: center;
    border-radius: 15px;
    transition: transform 0.3s;
}

.method-card:hover {
    transform: translateY(-10px);
}

.conclusion-list li {
    font-size: 1.1rem;
    margin: 15px 0;
}
</style>

{% block scripts %}
<script>
// Add custom filters for Jinja2
const formatNumber = (num) => num.toLocaleString();
</script>
{% endblock %}
{% endblock %}